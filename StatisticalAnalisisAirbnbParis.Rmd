---
title: "**Estudio de datos de Airbnb en la ciudad de París entre semana**" 
author: "Juan Jose Diaz Parra, Mateo Silva Lasso, Santiago Espinosa, Melissa Dayana Mora "
date: "`r Sys.Date()`"
output: 
  html_document: 
    toc: yes
    toc_float: yes
    collapsed: yes
    smooth_scroll: yes
    theme: journal
    highlight: kate
    code_folding: show
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### **Antecedentes:**

Airbnb es una plataforma de alojamiento en línea que permite a los usuarios alquilar viviendas privadas a corto plazo. En los últimos años, el aumento del turismo ha llevado a un aumento en el número de alojamientos de Airbnb en todo el mundo, llegando a competir incluso con las grandes compañías hoteleras en el mundo. La capital de Francia, París, es la ciudad con mayor número de visitantes en un año y tiene una gran cantidad de alojamientos de Airbnb. Si analizamos el comportamiento de este modelo de negocio en esta ciudad tan importante para el turismo podemos entender de forma más completa las características de este negocio y ser capaces de tomar decisiones conscientes dentro de este negocio.

\$\$\$\$

### **Definición del problema**

Como se mencionó anteriormente, la aplicación de Airbnb ha tenido un crecimiento supremamente acelerado y una expansión a pasos agigantados, lo que hace que sea muy difícil estimar las indicadores que permitan conocer el comportamiento de estos alojamientos, y poder tomar decisiones a partir de esta información. Es por esto que este informe se va a encargar en estimar indicadores que nos permitan tener una idea general de lo que son los alojamientos de Airbnb en el mundo o en este caso, específicamente en París, Francia.

\$\$\$\$

### **Objetivos del proyecto:**

#### **Objetivo General**

Analizar el comportamiento del modelo de negocio de Airbnb en la ciudad de París durante una semana, considerando variables como la capacidad de las habitaciones, la distancia al centro de la ciudad, el tipo de habitación, la privacidad de la habitación, el nivel de limpieza y la tarifa total, para comprender cómo se utilizan estos alojamientos y poder tomar decisiones informadas sobre la regulación del mercado de alquileres.

#### **Objetivos específicos:**

-   **Objetivo 1:** Calcular las estadisticas descriptivas de las variables cuantitativas como puede ser la media, mediana, moda y desviacion estadar.

-   **Objetivo 2:** Calcular las estadisticas descriptivas de las variables cualitativas a traves de tablas de frecuencias y graficas.

-   **Objetivo 3:** Ilustrar de forma grafica el comportamiento de las variables como puede ser por medio de graficas de cajas y bigotes, graficos de barras, histogramas, etc...

-   **Objetivo 4:** Plantear intervalos de confianza para cada una de las variables respecto a la media o la proporcion dependiendo del tipo de variable.

-   **Objetivo 5:** Plantear hipótesis de la media o la proporcion para cada una de las variables, dependiendo si esta es cualitativa o cuantitativa.

-   **Objetivo 6:** Realizar graficas que ilustren la posible relacion entre 2 variables del estudio, como pueden ser graficas de dispersion para las variables cuantitativas o graficos de barras apliadas para las variables cualitativas.

-   **Objetivo 7:** Determinar los precios promedio de los alojamientos en diferentes zonas de París durante la semana, considerando la distancia al metro y el tipo de habitación

-   **Objetivo 8:** Analizar el número de reservas y la ocupación de los alojamientos de Airbnb en París durante la semana, considerando la privacidad de la habitación y la limpieza

-   **Objetivo 9:** Evaluar la relación entre el tamaño de los alojamientos de Airbnb y su capacidad de hospedar a múltiples huéspedes en París durante la semana, considerando la tarifa total

\$\$\$\$

### **Recolección de datos y análisis de resultados:**

#### **Forma de recoleccion de datos:**

La forma de recolección de datos que se utilizó para este estudio fue la utilización de una base de datos publicada en la página web Kaggle, que es una red social para compartir información de bases de datos públicamente. El archivo que seleccionamos contiene más de 3000 publicaciones de alojamientos de Airbnb. La descarga de los datos se llevó a cabo mediante la descarga directa de los archivos de la página web en un formato estructurado, con un formato .csv, sin necesidad de utilizar técnicas de scraping web. Una vez descargados los datos, se procedió a analizarlos y seleccionar 6 variables con base a ciertos criterios previamente definidos.

\$\$\$\$

#### **Definición de la población de estudio:**

La población de estudio se refiere a las publicaciones de alojamientos disponibles los días entre semana durante el año 2015 en la plataforma Airbnb en París. Cómo se están considerando todas las publicaciones de la anteriormente mencionada plataforma, la población podría incluir diferentes tipos de alojamientos, como apartamentos, casas, habitaciones, entre otros.

\$\$\$\$

#### **Definición del metodo de muestreo:**

En el contexto anteriormente descrito, sería mejor utilizar el método de muestreo aleatorio simple para seleccionar una muestra de alojamientos de Airbnb a partir del archivo que contiene más de 3000 publicaciones. Con lo anteriormente mencionado se asegura que cada publicación tiene la misma probabilidad de ser seleccionada y, por lo tanto, que la muestra obtenida sea representativa de la población de alojamientos de Airbnb en cuestión.

\$\$\$\$

### **Definición de las variables de estudio:**

Dentro de nuestro estudio se van a estudiar ocho variables, de las cuales 4 van a ser cuantitativas y 4 van a ser cualitativas, tal como se muestran a continuacion:

#### **Variables cuantitativas:**

-   ***Puntaje de limpieza:*** Puntaje que determina el nivel de limpieza del alojamiento, se mide en una escala del 1 al 10.

-   ***Precio final:*** Se refiere al precio final por el alojamiento, medido en euros.

-   ***Capacidad de personas:*** Capacidad de personas que permite el alojamiento.

-   ***Distancia al centro:*** Distancia entre del alojamiento al centro de la ciudad de París, medido en Kilometros.

#### **Variables cualitativas:**

-   ***Tipo de alojamiento:*** Tipo de alojamiento que es ofrecido. Los valores que puede tomar son los siguientes: Casa o apartamento entero, cuarto privado, cuarto compartido.

-   ***Cuarto privado:*** Es el valor de si el cuarto es privado o no. Esta variable es de tipo booleano, es decir que solo puede tener los valores de TRUE y FALSE.

-   ***Multiples cuartos:*** Es el valor de si el alojamiento tiene multiples cuartos o no. Esta variable es de tipo booleano, es decir que solo puede tener los valores de TRUE y FALSE.

-   ***Fines de negocio:*** Es el valor de si el alojamiento se puede usar para fines de negocios o no. Esta variable es de tipo booleano, es decir que solo puede tener los valores de TRUE y FALSE.

## **Exploración de datos**

A continuación importamos todas las librerias que se van a usar dentro de este informe:

```{r,message = FALSE, warning = FALSE}
# Importar todas las librerias necesarias para el analisis
library(e1071)
library(readr)
library(tidyverse)
library(dplyr)
library(xts)
library(psych)
library(gmodels)
library(MASS)
library(fitdistrplus)
library(lmtest)
library(fdth)
library(readxl)
library(ggplot2)
library(plotly)
library(PASWR2)
library(lattice)
library(descr)
library(openxlsx)
library(kableExtra)
library(pastecs)
library(moments)
```

La base de datos de la cual vamos a explorar está dentro de un formato .csv y, para una mayor practicidad, vamos a guardar cada una de las variables a explorar dentro de un elemento distinto de nuestro entorno, tal como se continúa a continuación:

```{r, include = FALSE, message=FALSE}

#setwd('C:/Users/Jardi/Downloads/santy/inferencia/Statistical-analysis-Airbnb-Paris')
#setwd('C:/Users/Mateo Silva/Desktop/rparisino/Statistical-analysis-Airbnb-Paris)
#setwd('C:/Users/melyb/OneDrive/Documentos/GitHub/Statistical-analysis-Airbnb-Paris')
setwd('C:/Users/melyb/OneDrive/Documentos/GitHub/Statistical-analysis-Airbnb-Paris')

getwd
Paris_weekdays <- read_csv("paris_weekdays.csv")
datos <- Paris_weekdays
```

```{r}
#Variables cuantitativas
CalificacionDeLimpieza <- datos$cleanliness_rating
PrecioFinal <- datos$realSum
CapacidadPersonas <- datos$person_capacity
DistanciaCentro <- datos$dist

#Variables cualitativas
TipoDeCuarto<-  datos$room_type
CuartoPrivado <- datos$room_private
PoseeMasDeUnCuarto <- datos$multi
FinesDeNegocios <- datos$biz

budapest_weekdays <- read_csv("rome_weekdays.csv")
```

## **Estadística descriptiva para las variables**

### **Variables cuantitativas**

### **Calificación de limpieza**

*Grafico de barras*

```{r}
boxplot(CalificacionDeLimpieza, horizontal = TRUE)
```

Si le quitamos los valores atípicos se vería algo así:

```{r}
mean_val <- mean(CalificacionDeLimpieza)
sd_val <- sd(CalificacionDeLimpieza)
primerFiltro <- CalificacionDeLimpieza[CalificacionDeLimpieza < (mean_val + 2.9*sd_val) & CalificacionDeLimpieza > (mean_val - 2.9*sd_val)]
mean_val2 <- mean(primerFiltro)
sd_val2 <- sd(primerFiltro)
segundoFiltro <- primerFiltro[primerFiltro < (mean_val2 + 2.9*sd_val2) & primerFiltro > (mean_val2 - 2.9*sd_val2)] 
mean_val3 <- mean(segundoFiltro)
sd_val3 <- sd(segundoFiltro)
CalificacionDeLimpiezaSinAtipicos <- segundoFiltro[segundoFiltro < (mean_val3 + 2.9*sd_val3) & segundoFiltro > (mean_val3 - 2.9*sd_val3)]  
boxplot(CalificacionDeLimpiezaSinAtipicos, horizontal = TRUE)
```

*Mínimo:*

```{r, echo = FALSE}
min <- min(CalificacionDeLimpiezaSinAtipicos)
min
```

*Máximo:*

```{r, echo = FALSE}
max <- max(CalificacionDeLimpiezaSinAtipicos)
max
```

*Rango:*

```{r, echo = FALSE}
rango <- max-min
rango
```

*Media:*

```{r, echo = FALSE}
media <- mean(CalificacionDeLimpiezaSinAtipicos)
media
```

*Desviación estándar:*

```{r, echo = FALSE}
desv_estándar <- sd(CalificacionDeLimpiezaSinAtipicos)
desv_estándar
```

Vemos que la desviacion estandar es menor a 20, por lo que podemos decir que la media si es representativa en esta distribucion

*Coeficiente de variación:*

```{r, echo = FALSE}
coef_var <- desv_estándar/media
coef_var
```

*Cuartiles 1 y 3:*

```{r, echo = FALSE}
##Cuartil 1
q1 <- unname(quantile(CalificacionDeLimpiezaSinAtipicos, 0.25))
q1
##Cuartil 3
q3 <- unname(quantile(CalificacionDeLimpiezaSinAtipicos, 0.75))
q3
```

*Rango intercuartil:*

```{r, echo = FALSE}
ric <- q3 - q1
ric
```

*Cerco inferior y superior:*

```{r, echo = FALSE}
#Cerco inferior 
cerco_inf <- q1 - 1.5*ric
cerco_inf
#Cerco superior
cerco_sup <- q3 + 1.5*ric
cerco_sup
```

*Coeficiente de simetria*

```{r, echo = FALSE}
skewness(CalificacionDeLimpiezaSinAtipicos)
```
Vemos que el valor de este coeficiente es negativo, podemos decir que esta variable tiene una asimetria hacia la izquierda.

*Curtosis*

```{r, echo = FALSE}
cuortosis <- kurtosis(CalificacionDeLimpiezaSinAtipicos)
cuortosis
```

Vemos que el Coeficiente de curotsis es positivo, por lo que indica que la distribución tiene una cola larga o pesada. Es decir, la distribución tiene una cantidad relativamente grande de valores que se alejan de la media. Por lo tanto, la distribución es más puntiaguda (con más masa concentrada en la parte central) que una distribución normal.

*Histograma*

```{r}
calificacion2 <- cut(CalificacionDeLimpiezaSinAtipicos, c(seq(from = 7, to = 11, by = 1),65), include.lowest=TRUE)
tabla.2 <- freq(ordered(calificacion2))
```

*Tabla de frecuencias*

```{r}
tabla.2
```

```{r}
eda(CalificacionDeLimpiezaSinAtipicos)
```




### **Precio final**

*Grafico de barras*

```{r}
boxplot(PrecioFinal, horizontal = TRUE)
```

Si le quitamos los valores atípicos se vería algo así:

```{r}
mean_val <- mean(PrecioFinal)
sd_val <- sd(PrecioFinal)
PrecioFinalSinAtipicos <- PrecioFinal[PrecioFinal < (mean_val + 2.1*sd_val) & PrecioFinal > (mean_val - 2.1*sd_val)]
mean_val2 <- mean(PrecioFinalSinAtipicos)
sd_val2 <- sd(PrecioFinalSinAtipicos)
PrecioFinalSinAtipicos2 <- PrecioFinalSinAtipicos[PrecioFinalSinAtipicos < (mean_val2 + 2.1*sd_val2) & PrecioFinalSinAtipicos > (mean_val2 - 2.1*sd_val2)]
mean_val3 <- mean(PrecioFinalSinAtipicos2)
sd_val3 <- sd(PrecioFinalSinAtipicos2)
PrecioFinalSinAtipicos3 <- PrecioFinalSinAtipicos2[PrecioFinalSinAtipicos2 < (mean_val3 + 2.1*sd_val3) & PrecioFinalSinAtipicos2 > (mean_val3 - 2.1*sd_val3)]
mean_val4 <- mean(PrecioFinalSinAtipicos3)
sd_val4 <- sd(PrecioFinalSinAtipicos3)
PrecioFinalSinAtipicos4 <- PrecioFinalSinAtipicos3[PrecioFinalSinAtipicos3 < (mean_val4 + 2.1*sd_val4) & PrecioFinalSinAtipicos3 > (mean_val4 - 2.1*sd_val4)]
boxplot(PrecioFinalSinAtipicos4, horizontal = TRUE)
```

*Mínimo:*

```{r, echo = FALSE}
min <- min(PrecioFinalSinAtipicos4)
min
```

*Máximo:*

```{r, echo = FALSE}
max <- max(PrecioFinalSinAtipicos4)
max
```

*Rango:*

```{r, echo = FALSE}
rango <- max-min
rango
```

*Media:*

```{r, echo = FALSE}
media <- mean(PrecioFinalSinAtipicos4)
media
```

*Desviación estándar:*

```{r, echo = FALSE}
desv_estándar <- sd(PrecioFinalSinAtipicos4)
desv_estándar
```

Aqui podemos ver que la desviacion estadar es mayor a 20 por lo tanto la media no es representativa para en este caso, por lo que la variable representativa seria la mediana.

*Coeficiente de variación:*

```{r, echo = FALSE}
coef_var <- desv_estándar/media
coef_var
```

*Cuartiles 1 y 3:*

```{r, echo = FALSE}
##Cuartil 1
q1 <- unname(quantile(PrecioFinalSinAtipicos4, 0.25))
q1
##Cuartil 3
q3 <- unname(quantile(PrecioFinalSinAtipicos4, 0.75))
q3
```

*Rango intercuartil*

```{r, echo = FALSE}
ric <- q3 - q1
ric
```

*Cerco inferior y superior:*

```{r, echo = FALSE}
#Cerco inferior 
cerco_inf <- q1 - 1.5*ric
cerco_inf
#Cerco superior
cerco_sup <- q3 + 1.5*ric
cerco_sup
```

*Curtosis*

```{r, echo = FALSE}
curtosis <- kurtosis(PrecioFinalSinAtipicos4)
curtosis
```

*coeficiente de simetria*

```{r, echo = FALSE}
skewness(PrecioFinalSinAtipicos4)
```

*tabla de frecuencia*
```{r}
preciof <- cut(PrecioFinalSinAtipicos4, c(seq(from = 90, to = 600, by = 100)), include.lowest=TRUE)
tabla.2 <- freq(ordered(preciof))
tabla.2
```

```{r}
eda(PrecioFinalSinAtipicos4)
```



### **Capacidad de personas**

*Mínimo:*

```{r, echo = FALSE}
min <- min(CapacidadPersonas)
min
```

*Máximo:*

```{r, echo = FALSE}
max <- max(CapacidadPersonas)
max
```

*Rango:*

```{r, echo = FALSE}
rango <- max-min
rango
```

*Media:*

```{r, echo = FALSE}
media <- mean(CapacidadPersonas)
media
```

*Desviación estándar:*

```{r, echo = FALSE}
desv_estándar <- sd(CapacidadPersonas)
desv_estándar
```

Vemos que la desviacion estandar es menor a 20, por lo que podemos decir que la media si es representativa en esta distribucion

*Coeficiente de variación:*

```{r, echo = FALSE}
coef_var <- desv_estándar/media
coef_var
```

*Cuartiles 1 y 3:*

```{r, echo = FALSE}
##Cuartil 1
q1 <- unname(quantile(CapacidadPersonas, 0.25))
q1
##Cuartil 3
q3 <- unname(quantile(CapacidadPersonas, 0.75))
q3
```

*Rango intercuartil*

```{r, echo = FALSE}
ric <- q3 - q1
ric
```

*Coeficiente de asimetría*
```{r, echo = FALSE}
skewness(CapacidadPersonas)
```
Como el valor de este coeficiente es positivo, podemos decir que esta variable tiene una asimetria hacia la derecha

*Cerco inferior y superior:*

```{r, echo = FALSE}
#Cerco inferior 
cerco_inf <- q1 - 1.5*ric
cerco_inf
#Cerco superior
cerco_sup <- q3 + 1.5*ric
cerco_sup
```

*Curtosis*

```{r, echo = FALSE}
curtosis <- kurtosis(CapacidadPersonas)
curtosis
```

Como la curtosis tiene un valor de 2.99, podemos decir que los datos tienen una distribucion leptocurtica, es decir, hay muchos datos que estan acumulados cerca de la media.

*Gráfico de barras*   

```{r, echo=FALSE}

tabla.2 <- freq(ordered(CapacidadPersonas))
```

*Tabla de frecuencias*

```{r}
tabla.2
```

```{r}
eda(CapacidadPersonas)
```

Vemos que esta distribución no posee datos atipicos por lo que podemos usarla tal cual como está.

### **Distancia al centro de la ciudad **

*Diagrama de cajas:*

```{r, echo = FALSE}
DistanciaCentro <- datos$dist
boxplot(DistanciaCentro, horizontal = TRUE)
```

Vemos que en esta distribución se ven que existen varios atipicos por lo que los vamos a quitar

*Datos Atipicos*

```{r, echo = FALSE}
mean_val <- mean(DistanciaCentro)
sd_val <- sd(DistanciaCentro)
primerFiltro <- DistanciaCentro[DistanciaCentro < (mean_val + 3*sd_val) & DistanciaCentro > (mean_val - 3*sd_val)]
mean_val1 <- mean(primerFiltro)
sd_val1 <- sd(primerFiltro)
DistanciaCentroSinAtipicos <- primerFiltro[primerFiltro < (mean_val1 + 3*sd_val1) & primerFiltro > (mean_val1 - 3*sd_val1)]
boxplot(DistanciaCentroSinAtipicos, horizontal = TRUE)
```

*Media:*

```{r, echo = FALSE}
mean_val <- mean(DistanciaCentroSinAtipicos)
mean_val
```

*Desviación estándar:*

```{r, echo = FALSE}
sd_val <- sd(DistanciaCentroSinAtipicos)
sd_val
```

*Mínimo:*

```{r, echo = FALSE}
min <- min(DistanciaCentroSinAtipicos)
min
```

*Máximo:*

```{r, echo = FALSE}
max <- max(DistanciaCentroSinAtipicos)
max
```

*Rango:*

```{r, echo = FALSE}
rango <- max-min
rango
```

*Coeficiente de variación:*

```{r, echo = FALSE}
coef_var <- sd_val/mean_val
coef_var
```

*Cuartiles 1 and 3:*

```{r, echo = FALSE}
##Cuartil 1
q1 <- unname(quantile(DistanciaCentroSinAtipicos, 0.25))
q1
##Cuartil 3
q3 <- unname(quantile(DistanciaCentroSinAtipicos, 0.75))
q3
```

*Rango intercuartil*

```{r, echo = FALSE}
ric <- q3 - q1
ric
```

*Cerco inferior y superior:*

```{r, echo = FALSE}
#Cerco inferior 
cerco_inf <- q1 - 1.5*ric
cerco_inf
#Cerco superior
cerco_sup <- q3 + 1.5*ric
cerco_sup
```

*Curtosis:*

```{r, echo = FALSE}
curtosis <- kurtosis(DistanciaCentroSinAtipicos)
curtosis
```

Aqui realizamos la curtosis por lo que la desviacion estandar incluso sin atipicos es menor a 20. La distribucion normal Tiene una curtosis de 0. Esto significa que tiene colas moderadas y una concentración equilibrada de valores alrededor de la media. Cuando la curtosis de una distribución es diferente de 0, indica que la distribución tiene una forma diferente a la de una distribución normal.Podemos ver una curtosis positiva, esto implica que hay una mayor concentración de valores extremos y una menor dispersión de valores alrededor de la media.  En resumen, al mencionar que la curtosis indica desviaciones respecto a la distribución normal, se está señalando que se están evaluando las diferencias en la forma de la distribución en relación con una distribución de referencia teórica, que es la distribución normal. Esto permite identificar características distintivas de la distribución de los datos en estudio.


*Coeficiente de simetria:*

```{r, echo = FALSE}
skewness(DistanciaCentroSinAtipicos)
```

Este coeficiente nos dice que tiene una asimetria positiva, por lo que nos dice que la distribucion tiene una cola derecha mas larga que la izquierda



*Tabla de frecuencia*
*grafico de barras*

```{r, warning=FALSE}
rangos <- cut(DistanciaCentroSinAtipicos,  c(seq(from = 0, to =7 , by = 2),8), include.lowest=TRUE)

tabla_frecuenciaD <- table(rangos)
print(tabla_frecuenciaD)

tabla.D <- freq(ordered(rangos))
tabla.D
```

```{r}
eda(DistanciaCentroSinAtipicos)
```



## **Estadística descriptiva variables cualitativas:**

### **Tipo de cuarto**

Generamos una tabla de frecuencias

```{r, echo = FALSE}
tablaDeFrecuencia <- table(TipoDeCuarto)
print(tablaDeFrecuencia)
```

Calculamos la frecuencia relativa

```{r, echo = FALSE}
tablaDeFrecuenciaRelativa <- prop.table(tablaDeFrecuencia)
print(tablaDeFrecuenciaRelativa)
```

Ahora calculamos la moda

```{r, echo = FALSE}
moda <- names(tablaDeFrecuencia)[which.max(tablaDeFrecuencia)]
print(moda)
```

*Diagrama de barras*

```{r}
barplot(table(TipoDeCuarto)) 
```

### **Cuarto privado**

Generamos una tabla de frecuencias

```{r, echo = FALSE}
tablaDeFrecuencia <- table(CuartoPrivado)
print(tablaDeFrecuencia)
```

Calculamos la frecuencia relativa

```{r, echo = FALSE}
tablaDeFrecuenciaRelativa <- prop.table(tablaDeFrecuencia)
print(tablaDeFrecuenciaRelativa)
```

Ahora calculamos la moda

```{r, echo = FALSE}
moda <- names(tablaDeFrecuencia)[which.max(tablaDeFrecuencia)]
print(moda)
```

*Grafico de barras*

```{r}
barplot(table(CuartoPrivado), names.arg = c("Sin cuarto privado", "Con cuarto privado"))  
```

### **Múltiples cuartos**

Generamos una tabla de frecuencias

```{r, echo = FALSE}
tablaDeFrecuencia <- table(PoseeMasDeUnCuarto)
print(tablaDeFrecuencia)
```

Calculamos la frecuencia relativa

```{r, echo = FALSE}
tablaDeFrecuenciaRelativa <- prop.table(tablaDeFrecuencia)
print(tablaDeFrecuenciaRelativa)
```

Ahora calculamos la moda

```{r, echo = FALSE}
moda <- names(tablaDeFrecuencia)[which.max(tablaDeFrecuencia)]
print(moda)
```

*Gráfico de pastel:*

```{r, echo = FALSE}
colores <- c("gray62", "white")
tabla <- table(PoseeMasDeUnCuarto)
pie(tabla, main="Grafico de pastel multiples cuartos", labels = c("Posee un cuarto", "Posee mas de un cuarto"), col = colores)
```



### **Fines de negocios**



*Generamos una tabla de frecuencias*

```{r, echo = FALSE}
frecuencia_FinNegocios <- table(FinesDeNegocios)
print(frecuencia_FinNegocios)
```

*Calculamos la frecuencia relativa*

```{r, echo = FALSE}
frecuenciaRelativa_FinNegocios <- prop.table(frecuencia_FinNegocios)
print(frecuenciaRelativa_FinNegocios)
```

*Ahora calculamos la moda*

```{r, echo = FALSE}
moda <- names(frecuencia_FinNegocios)[which.max(frecuencia_FinNegocios)]
print(moda)
```

*Diagrama de barras*

```{r}
colores <- c("gray62", "white")
tabla <- table(FinesDeNegocios)
pie(tabla, main="Grafico de pastel fines de negocios", labels = c("Sin fines de negocios", "Con fines de negocios"), col = colores)
```

\$\$\$\$


### **Análisis de resultados:**

Para esta sección se van a estimar parámetros de interés a través de intervalos de confianza para cada una de las variables, ya sea para la media poblacional o la proporción. Así mismo, se van a realizar pruebas de hipótesis para la media y la proporción. \$\$\$\$

### **Intervalos de confianza:**

Para estimar los intervalos de confianza, tenemos en cuenta que la base de datos que tenemos es una muestra de toda la población de alojamientos de París en Airbnb entre semana. Por lo tanto, para cada una de estas estimaciones, vamos a utilizar las fórmulas de la distribución t-Student, ya que no contamos con la desviación estándar poblacional.

\$\$\$\$

### **Variables cuantitativas**

##### **Calificación de limpieza**

*Ahora calculamos la media muestral*

```{r}
mediaMuestral <- mean(CalificacionDeLimpieza)
mediaMuestral
```

*Calculamos la desviación muestral*

```{r}
desviacionestándarMuestral <- sd(CalificacionDeLimpieza)
desviacionestándarMuestral
```

Dentro de la estimación vamos a tomar el nivel de confianza como 98%. y vamos a aplicar la siguiente ecuación:

$$\bar{x} \pm t_{\alpha/2, n-1} \frac{s}{\sqrt{n}}$$

*Ahora hacemos la estimación*

```{r}
rango_inferior <- mediaMuestral+qt(0.01, df=length(CalificacionDeLimpieza)-1)*(desviacionestándarMuestral/sqrt(length(CalificacionDeLimpieza)))
rango_inferior

rango_Superior <- mediaMuestral-qt(0.01, df=length(CalificacionDeLimpieza)-1)*(desviacionestándarMuestral/sqrt(length(CalificacionDeLimpieza)))
rango_Superior
```

Con estos valores obtenemos el siguiente rango:

$$[9.21~; ~9.30]$$ Es decir que el puntaje de limpieza promedio de los Airbnb en París entre semana con un 98% de confianza está dentro del rango de los 9.21 puntos a los 9.30 puntos.

\$\$\$\$

##### **Precio Final**

*Ahora calculamos la media muestral*

```{r}
mediaMuestral <- mean(PrecioFinal)
mediaMuestral
```

*Calculamos la desviación muestral*

```{r}
desviacionestándarMuestral <- sd(PrecioFinal)
desviacionestándarMuestral
```

Dentro de la estimación vamos a tomar el nivel de confianza como 95%. y vamos a aplicar la siguiente ecuación:

$$\bar{x} \pm t_{\alpha/2, n-1} \frac{s}{\sqrt{n}}$$

*Ahora hacemos la estimación*

```{r}
rango_inferior <- mediaMuestral+qt(0.025, df=length(PrecioFinal))*(desviacionestándarMuestral/sqrt(length(PrecioFinal)))
rango_inferior

rango_Superior <- mediaMuestral-qt(0.025, df=length(PrecioFinal))*(desviacionestándarMuestral/sqrt(length(PrecioFinal)))
rango_Superior
```

Con estos valores obtenemos el siguiente rango:

$$[384.90~; ~412.69]$$ Es decir, que el puntaje de limpieza promedio de los Airbnb en París entre semana, con un 98% de confianza, está dentro del rango de 9.21 puntos a 9.30 puntos.

\$\$\$\$

##### **Capacidad de personas**

*Ahora calculamos la media muestral*

```{r}
mediaMuestral <- mean(CapacidadPersonas)
mediaMuestral
```

*Calculamos la desviación muestral*

```{r}
desviacionestándarMuestral <- sd(CapacidadPersonas)
desviacionestándarMuestral
```

Dentro de la estimación vamos a tomar el nivel de confianza como 95%. y vamos a aplicar la siguiente ecuación:

$$\bar{x} \pm t_{\alpha/2, n-1} \frac{s}{\sqrt{n}}$$

*Ahora hacemos la estimación*

```{r}
rango_inferior <- mediaMuestral+qt(0.025, df=length(CapacidadPersonas))*(desviacionestándarMuestral/sqrt(length(CapacidadPersonas)))
rango_inferior

rango_Superior <- mediaMuestral-qt(0.025, df=length(CapacidadPersonas))*(desviacionestándarMuestral/sqrt(length(CapacidadPersonas)))
rango_Superior
```

Con estos valores obtenemos el siguiente rango:

$$[2.90~; ~2.99]$$ Es decir, que el puntaje de limpieza promedio de los AirBnB en París entre semana, con un 98% de confianza, está dentro del rango de 9.21 puntos a 9.30 puntos.

\$\$\$\$

#### **Distancia al centro de la ciudad**

*Ahora calculamos la media muestral*

```{r}
mediaMuestral <- mean(DistanciaCentro)
mediaMuestral
```

*Calculamos la desviación muestral*

```{r}
desviacionestándarMuestral <- sd(DistanciaCentro)
desviacionestándarMuestral
```

Dentro de la estimación vamos a tomar el nivel de confianza como 98%. y vamos a aplicar la siguiente ecuación:

$$\bar{x} \pm t_{\alpha/2, n-1} \frac{s}{\sqrt{n}}$$

*Ahora hacemos la estimación*

```{r}
rango_inferior <- mediaMuestral+qt(0.01, df=length(DistanciaCentro))*(desviacionestándarMuestral/sqrt(length(DistanciaCentro)))
rango_inferior

rango_Superior <- mediaMuestral-qt(0.01, df=length(DistanciaCentro))*(desviacionestándarMuestral/sqrt(length(DistanciaCentro)))
rango_Superior
```

Con estos valores obtenemos el siguiente rango:

$$[2.94~; ~3.07]$$ Es decir, que la distancia promedio al centro de los Airbnb en París entre semana, con un 95% de confianza, está dentro del rango de 2.94 kilómetros a 3.07 kilómetros.

\$\$\$\$

### **Variables cualitativas**

\$\$\$\$

#### **Tipo de cuarto**

Para esta variable vamos a calcular los intervalos en que cada uno de los posibles tipos de cuartos estén, cada uno con un nivel de confianza del 95%:

```{r}
# Calcular la proporción de cada categoría en los datos
proporciones <- table(TipoDeCuarto) / length(TipoDeCuarto)

# Calcular el error estándar de cada proporción
error_estándar <- sqrt(proporciones * (1 - proporciones) / length(TipoDeCuarto))

# Calcular el intervalo de confianza del 95% para cada proporción
intervalos_confianza_inferiores <- proporciones + qt(0.025, length(TipoDeCuarto)) * error_estándar
intervalos_confianza_superiores <- proporciones - qt(0.025, length(TipoDeCuarto)) * error_estándar

# Imprimir el resultado
cat("Los intervalos de confianza del 95% son:")
for (i in 1:length(proporciones)) {
  cat("\n - Categoría '", names(proporciones)[i], "': [", intervalos_confianza_inferiores[i], ", ", intervalos_confianza_superiores[i], "]", sep="")
}

```

Con esto, podemos decir que los rangos de confianza de la proporción de los valores son los siguientes:

-   **Casa/ Apartamento entero:** $[0.73, 0.76]$, es decir entre 73% al 76%
-   **Cuarto Privado** $[0.23, 0.26]$, es decir entre 23% al 26%
-   **Cuarto compartido** $[0.01, 0.02]$, es decir entre 1% al 2%

\$\$\$\$

#### **Cuarto privado**

*Buscamos la proporción de esta y tomamos los alojamientos con cuarto privado*

```{r}
datos_true <- subset(CuartoPrivado, CuartoPrivado == TRUE)
privateRoomTrue <- sum(CuartoPrivado)
privateRoomTrue
```

*Se hara la estimación para los alojamientos que cuentan con cuarto privado*

```{r}
p <- privateRoomTrue/length(CuartoPrivado)
p
```

*Finalmente usamos el siguiente código para estimar la proporción con una confianza del 95%*

```{r}
rango_inferior <-p + qt(0.025, length(CuartoPrivado))* sqrt((p*(1-p))/length(CuartoPrivado)) 
rango_inferior

rango_superior <-  p - qt(0.025, length(PoseeMasDeUnCuarto))* sqrt((p*(1-p))/length(CuartoPrivado)) 
rango_superior

```

*Escribimos el intervalo caluculado anteriormente:*

$$[0.23, 0.26]$$

*Con una confianza al 95% podemos decir que la proporción de los alojamientos que poseen cuarto privado es mayor o igual que 0,23 y menor o igual a 0,26, o del 23% al 26%*

\$\$\$\$

#### **Multiples cuartos**

*Buscamos la proporción de esta y tomamos los alojamientos con más de un cuarto*

```{r}
datos_true <- subset(PoseeMasDeUnCuarto, PoseeMasDeUnCuarto == 1)
multi <- sum(datos_true)
multi
```

*Se hara la estimación para los alojamientos que cuentan con más de un cuarto*

```{r}
p <- multi/length(PoseeMasDeUnCuarto)
p
```

*Finalmente usamos el siguiente código para estimar la proporción con una confianza del 95%*

```{r}
rango_inferior <- p + qt(0.025, length(PoseeMasDeUnCuarto))* sqrt((p*(1-p))/length(PoseeMasDeUnCuarto)) 
rango_inferior

rango_superior <- p - qt(0.025, length(PoseeMasDeUnCuarto))* sqrt((p*(1-p))/length(PoseeMasDeUnCuarto)) 
rango_superior

```

*Escribimos el intervalo calculado anteriormente:*

$$[0.21, 0.23]$$

*Con una confianza al 95% podemos decir que la proporción de los alojamientos que poseen más de un cuarto es mayor o igual que 0,21 y menor o igual a 0,23, o del 21% al 23%*

\$\$\$\$

#### **Fines de negocios**

*Buscamos la proporción de esta y tomamos los alojamientos que son con fines de negocios*

```{r}
# <- subset(FinesDeNegocios, FinesDeNegocios == 1)
#multi <- sum(datos_true)
#multi
```

*Se hara la estimación para los alojamientos que son con fines de negocios*

```{r}
p <- multi/length(FinesDeNegocios)
p
```

*Finalmente usamos el siguiente código para estimar la proporción con una confianza del 95%*

```{r}
rango_inferior <- p + qt(0.025, length(FinesDeNegocios))* sqrt((p*(1-p))/length(FinesDeNegocios)) 
rango_inferior

rango_superior <- p - qt(0.025, length(FinesDeNegocios))* sqrt((p*(1-p))/length(FinesDeNegocios)) 
rango_superior

```

*Escribimos el intervalo caluculado anteriormente:*

$$[0.24, 0.27]$$

*Con una confianza al 95% podemos decir que la proporción de los alojamientos que que son para fines de negocios están entre el 0.24, y el 0.27, es decir, entre el 24% y el 27%*

\$\$\$\$

### **Hipótesis para las variables:**

Dentro de esta sección del estudio vamos a plantear hipótesis a las variables, ya sea respecto a la media o a la proporción, dependiendo de su caracteristica cualitativa o cuantitiva. Para realizar esto vamos a utilizar como base para plantear nuestras hipotesis los datos de AirBnb en Roma durante los dias entresemana, a partir de esto vamos a comprobar si se cumplen dichas hipotesis dentro de los Airbnb de Paris durante los dias entresemana.

Importamos los datos de AirBnb Roma entresemana:

```{r}
rome_weekdays <- read_csv("rome_weekdays.csv")
#Variables cuantitativas
CalificacionDeLimpiezaRoma <- rome_weekdays$cleanliness_rating
PrecioFinalRoma <- rome_weekdays$realSum
CapacidadPersonasRoma <- rome_weekdays$person_capacity
DistanciaCentroRoma <- rome_weekdays$dist

#Variables cualitativas
TipoDeCuartoRoma <-  rome_weekdays$room_type
CuartoPrivadoRoma <- rome_weekdays$room_private
PoseeMasDeUnCuartoRoma <- rome_weekdays$multi
FinesDeNegociosRoma <- rome_weekdays$biz
```


\$\$\$\$

### **Variables cuantitativas**

#### **Puntaje de limpieza**

Para la plataforma Airbnb es de gran imporancia la calificación de la limpieza de sus alojamientos, es por esto que se espera que la mayoría de sus alojamientos posean un buen puntaje de limpieza. Para poder plantear la hipotesis vamos a mirar cual es la media muestral de los Airbnb en Roma:

```{r}
mean(CalificacionDeLimpiezaRoma)
```

Vemos que su calificacion promedio es 9.52. Ahora queremos saber si el puntaje de limpieza en Paris es igual a 9.52, por lo que podemos plantear las siguientes hipotesis:

-   $H_0: \mu = 9.52$
-   $H_1: \mu \neq  9.52$

*Usamos el siguiente código para encontrar el valor de p:*

```{r}
with(datos, (t.test(CalificacionDeLimpieza, alternative = "two.sided", mu = 9.52, conf.level = 0.95)))
```

Con el resultado anterior podemos observar como $p < 0.05$, sabiendo esto, podemos rechazar la hipótesis nula y podemos afirmar que con un nivel de confianza del 95%, la calificación media de los alojamientos de Airbnb en la ciudad de París es diferente a 9.52.

#### **Precio final**

Sin duda los Airbnb en Paris quieren brindar la mejor atencion a sus clientes con los precios mas justos de acuerdo a su experiencia, por lo tanto van a comparar con Airbnb en Roma para poder establecer un punto de comparacion:

```{r}
mean(PrecioFinalRoma)
```


Como vemos la media de precios en roma es de 201, por lo tanto, vamor a plantear las siguientes hipótesis:

-   $H_0: \mu \leq 201$
-   $H_1: \mu > 201$

*Aplicamos el siguiente código para comprobar nuestras hipótesis:*

```{r}
with(datos, (t.test(PrecioFinalSinAtipicos4, alternative = "greater", mu =201, conf.level = 0.95)))

```

Vemos que el valor p es bastante pequeño, (menor al 0.05) asi que podemos rechazar esta hipotesis nula y podemos concluir que los Airbnb en paris tiene un precio mayor a 201 Euros.

#### **Capacidad de personas**


```{r, include = FALSE, message=FALSE}

mean(CapacidadPersonasRoma)
```
La capacidad de personas que caben dentro de un alojamiento es sumamente importante en la industria de Airbnb. En la ciudad de Roma se realizo un estudio que concluyo en que la capacidad media es de 3.35 personas por alojamiento. Se desea saber si, con un nivel de confianza del 95%, se cumple como hipótesis nula que la capacidad de personas promedio es mayor o igual que la capacidad de personas promedio de Roma.

Planteamos las siguientes hipótesis:

-   $H_0: \mu \geq 3.35$
-   $H_1: \mu < 3.35$

*Aplicamos el siguiente código para comprobar nuestras hipótesis:*

```{r}
with(datos, (t.test(CapacidadPersonas, alternative = "less", mu = 3.35, conf.level = 0.95)))

```

Como podemos ver, el valor p es menor que nuestro alfa, por lo tanto podemos rechazar la hipotesis nula y decir que la capacidad media de personas de los alojamientos de paris es mayor a la de roma.

#### **Distancia al centro**

Para este punto vamos a tomar como punto referencia la distancia promedio al centro de la ciudad en los AirBnb de Roma para poder plantear nuestro estudios de Paris, a continuacion sacamos ese valor:


```{r}
mean(DistanciaCentroRoma)
```


Se sabe que los alojamientos de Airbnb en Roma tienen una distancia hacia el centro de su ciudad de 3.04 kilómetros. Airbnb en Paris requiere saber si la distancia de sus alojamientos es igual a 3.04 kilometros con respecto a la distancia hacia el centro de Paris. Para esto, se plantean las siguientes hipótesis con un nivel de confianza del 95%:

-   $H_0: \mu = 3.04$
-   $H_1: \mu \neq  3.04$

Calculamos el valor de p con el siguiente código


```{r}
with(datos, (t.test(DistanciaCentro, alternative = "two.sided", mu = 3.04, conf.level = 0.95)))

```

Como el valor p es mucho menor que el valor de alfa, podemos rechazar el hipótesis $H_0$ y, por lo tanto, podemos decir que a un nivel de confiabilidad del 95% de que el promedio de las distancias de los Airbnb al centro de Paris sea diferente a 3.04 kilometros.

### **Variables cualitativas**

#### **Tipo de cuarto**

Dentro de la industria de Airbnb está la incertidumbre acerca de la posible proporción de alojamientos que ofrecen el apartamento o la casa completa, ya que esto permite una mayor comodidad y exclusividad al usuario. Para poder sacar un punto de comparacion para nuestro estudio vamos a usar los datos de Roma en esta situacion:

```{r}
sum(TipoDeCuartoRoma == "Entire home/apt")/ length(TipoDeCuartoRoma)
```


Ahora, gracias a este resultado queremos saber si la proporcion de alojamientos que proporcionan todo la casa o apartamento esta por debajo del 61.3%. A continuación, se muestra una prueba de hipótesis de esta información con un nivel de confianza del 95%:

Dentro de nuestro estudio queremos saber si

Planteamos las siguientes hipótesis:

-   $H_0: \pi \geq 0.613$
-   $H_1: \pi < 0.613$

Para comprobar estas hipótesis utilizamos el siguiente código:

```{r}
daticos<- prop.test( sum(TipoDeCuarto== "Entire home/apt"), n = length(datos$room_type), p = 0.613, alternative = "less")
daticos
```

Como podemos ver que el valor p es mayor al valor de confianza que fue de 0.05, por lo tanto, no podemos rechazar la hipótesis nula $H_0$. Es decir, que podemos afirmar que la probabilidad de que los alojamientos de Airbnb ofrezcan todo el apartamento o casa es mayor al 61.3%.

#### **Cuarto Privado**

Los alojamientos de Airbnb aris son las mas visitadas en el mundo, pues Francia es un pais bastante turisto, y ademas Paris es la ciudad que mas turistas recibe en el mundo, debido a esto quieren dar la mejor atencion a sus turistas, pues gran parte vive de estos. Ahora bien, no a todos les alcanza el dinero y les toca compartir, pero ellos desean saber cual es la proporcion de personas que tienen cuarto privado, por esto van a comparar con los Airbnb en Roma:

```{r}
sum(CuartoPrivadoRoma == "TRUE")/ length(CuartoPrivadoRoma)
```

como podemos ver, la proporcion de personas que poseen un cuarto privado en AirBnb Roma es de 0.38, entonces planteamos las siguientes hipótesis:

-   $H_0: \pi < 0.38$
-   $H_1: \pi \geq 0.38$

Para comprobar esto tenemos que utilizar una hipotesis alternativa de maypu en la curva y lo hacemos con la siguiente función:

```{r}
daticos<- prop.test(sum(CuartoPrivado[CuartoPrivado== "TRUE"] ), n = length(CuartoPrivado), p = 0.38, alternative = "greater")
daticos
```

Como podemos ver,` el valor p es bastante mayor al 5% por lo tanto no existe alguna evidencia para decir que la proporcion de personas con cuarto privado en paris es menor al 0.38.

#### **Multiples cuartos**

Un buen punto de partida para relizar las hipotesis dentro del estudio de esta variable seria usando los datos de Roma, tal como lo hicimos anteriormente con las otras variables:

```{r}
sum(PoseeMasDeUnCuartoRoma == "1")/ length(PoseeMasDeUnCuartoRoma)
```


Podemos tomar como base este resultado y utilizarlo para hacer las hipotesis, por lo que se desea comprobar dicha estimación con un nivel de confianza del 92%. Para esto, se plantean las siguientes hipótesis:

-   $H_0: \pi \geq 0.39$
-   $H_1: \pi < 0.39$

```{r}
daticos<- prop.test(sum(datos$multi[datos$multi== "1"] ), n = length(datos$multi), p = 0.39, alternative = "less", conf.level = 0.92)
daticos
```

Como podemos ver, el valor p es mayor a nuestro nivel de confianza, por lo que podemos decir que no podemos rechazar $H_0$. Por lo tanto, podemos decir que no hay suficiente información para afirmar que menos del 39% de los alojamientos de Airbnb tienen múltiples cuartos.

#### **Fines de negocios**

Para poder plantear las hipotesis nos basamos en las estadisticas de Roma tal como lo hicimos en las anteriores hipotesis:

```{r}
mean(FinesDeNegociosRoma)
```

Para este caso se desea comprobar si en Paris se cumple que menos del 33% de los alojamientos es para fines de negocios, para dicha estimación vamos a usar un nivel de confianza del 92%. Para esto se plantean las siguientes hipótesis:

-   $H_0: \pi \geq 0.33$
-   $H_1: \pi < 0.33$

```{r}
daticos<- prop.test(sum(datos$biz[datos$biz== "1"] ), n = length(datos$biz), p = 0.33, alternative = "less", conf.level = 0.92)
daticos
```

Como podemos ver, el valor p es mayor que nuestro nivel de confianza, por lo que no podemos rechazar $H_0$. Por lo tanto, no hay suficiente información para afirmar que más del 33% de los alojamientos se pueden utilizar para fines de negocios.

### **Hipotesis para varias variables**

los rbnb en paris quieren saber como varian sus precios de acuerdo a si el cuarto es compartido o no.


```{r}
datosC1 <- subset(datos,room_shared=="TRUE")
datosC2 <- subset(datos,room_shared=="FALSE")
```



para comprobar esto primero debemos plantear hipotesis de varianzas y poder ver si podemos tomar varianzas iguales o diferentes


$\sigma_1^2$: varianza de precio en Airbnb de paris

$\sigma_2^2$: varianza de precio en Airbnb de budapest

 
$H_0: \sigma_1^2 = \sigma_2^2$

$H_1: \sigma_1^2 \neq \sigma_2^2$

```{r}
var.test(datosC1$realSum,datosC2$realSum, alternative = "two.sided",conf.level = 0.95)
```

como podemos ver, el valor p es mucho menor que 0.05 por lo tanto asumimos varianzas diferentes

ahora, compararemos la media de los precios asumiendo varianzas diferentes

$\mu_1$: media de precios de Airbnb en paris con cuarto compartido

$\mu_2$: media de precios de Airbnb en paris con cuarto no compartido

$H_0: \mu_1 \leq \mu_2$

$H_1: \mu_1 > \mu_2$



```{r}
t.test(datosC1$realSum,datosC2$realSum,
      alternative = "greater",
      mu = 0, paired = FALSE, var.equal = FALSE,
     conf.level = 0.95)
```
Podemos ver que el valor p es mayor que 0,05, por lo tanto podemos concluir que no existe evidencia para decir que el precio de las habitaciones no compartidas es mayor al de las compartidas


*Capacidad de personas*

los rbnb en paris desean conocer que capacidad tiene sus habitacion cuando son privadas o publicas

```{r}
datosC1 <- subset(datos,room_private=="TRUE")
datosC2 <- subset(datos,room_private=="FALSE")
```

A continuacion se planteara una hipotesis para dos variables para comprobar si la capacidad media de personas de un cuarto publico es mayor al de uno privado. Primero vamos a verificar si podemos asumir varianzas iguales o diferentes:

$\sigma_1^2$: Varianza de capacidad de personas con cuarto publico

$\sigma_2^2$: Varianza de capacidad de personas con cuarto privado
 
$H_0: \sigma_1^2 = \sigma_2^2$

$H_1: \sigma_1^2 \neq \sigma_2^2$

```{r}
var.test(datosC2$person_capacity,datosC1$person_capacity, alternative = "greater",conf.level = 0.95)
```

Podemos ver como el valor $p$ es mucho menor que 0.05, por lo que podemos asumir varianzas varianzas diferentes.

Ahora, compararemos la capacidad media de personas asumiendo varianzas diferentes

$\mu_1$: capacidad media de personas de con cuarto privado

$\mu_2$: capacidad media de personas con cuarto publico

$H_0: \mu_1 \leq \mu_2$

$H_1: \mu_1 > \mu_2$

```{r}
t.test(datosC1$person_capacity,datosC2$person_capacity,
       alternative = "greater",
       mu = 0, paired = FALSE, var.equal = TRUE,
       conf.level = 0.95)
```

aqui podemos ver que el valor p es mucho mayor a 0,05, por lo tanto podemos concluir que no existe evidencia para decir que la media de personas con cuarto privado tenga menos capacidad de personas que los cuartos publicos.



### **Cruces de variables**

Dentro de esta sección, de acuerdo a los objetivos planteados al inicio del informe, vamos a comparar diferentes variables entre sí con el fin de buscar algún tipo de relación entre ellas. A continuación se presentan las gráficas que ilustran dicha comparación o cruce.

\$\$\$\$

#### **Precio final vs Calificación de limpieza**

A continuación se ve en el eje x la calificación de limpieza y en el eje y el precio final.

```{r, warning = FALSE}
df <- data.frame(x = PrecioFinal, y = CalificacionDeLimpieza)
ggplot(data = data.frame(PrecioFinal, CalificacionDeLimpieza), aes(x = PrecioFinal, y = CalificacionDeLimpieza)) +
  geom_point() + xlim(0, 3000) + ylim(0, 10) +
  geom_smooth(method = "lm", formula = y ~ poly(x, 1, raw = TRUE) ) +
  labs(x = "Precio Final", y = "Calificación de limpieza")
```

Con esta grafica podemos ver si existe una relación entre el precio final de un alojamiento de Airbnb con respecto a la calificación de limpieza. Ademas, podemos afirmar que esta relación es directamente proporcional, es decir que entre mayor sea el precio, mayor va a ser la calificación de limpieza. Esto nos puede indicar que entre mas elevado es el precio, mas limpio podria llegar a ser el cuarto.




\$\$\$\$

#### **Precio final vs Distancia al centro de la ciudad**

A continuación se muestra una grafica de dispersión del precio final vs la distancia del alojamiento al centro de la ciudad:

```{r, warning = FALSE}
df <- data.frame(x = PrecioFinal, y = DistanciaCentro)
ggplot(data = data.frame(PrecioFinal, CalificacionDeLimpieza), aes(x = PrecioFinal, y = DistanciaCentro)) +
  geom_point() + xlim(0, 5000) + ylim(0, 10) +
  geom_smooth(method = "lm", formula = y ~ poly(x, 2, raw = TRUE) ) +
  labs(x = "Precio final", y = "Distancia al centro")
```

Con esta gráfica no podemos hacer conclusiones fuertes, por lo que podemos decir que en el caso específico de los Airbnb en París no hay una relación entre la distancia al centro de la ciudad con los precios.

```{r, warning = FALSE}

realsum2 <- cut(PrecioFinal, c(seq(from = 90, to = 600, by = 100)), include.lowest=TRUE)

#distancia2 <- 
cruce <- crosstab(realsum2, CalificacionDeLimpieza, prop.c = TRUE, plot=TRUE)
cruce
```

#### **Precio final vs Capacidad de personas**

En el siguiente gráfico se presenta en el eje x el precio final de los alojamientos y en el eje y la capacidad de personas:

```{r, warning = FALSE}
df <- data.frame(x = PrecioFinal, y = CapacidadPersonas)
ggplot(data = data.frame(PrecioFinal, CapacidadPersonas), aes(x = PrecioFinal, y = CapacidadPersonas)) +
  geom_point() + xlim(0, 1700) + ylim(0, 7) +
  geom_smooth(method = "lm", formula = y ~ poly(x, 2, raw = TRUE) ) +
  labs(x = "Precio final", y = "Capacidad personas")
```

Con esta grafica podemos decir que puede existir una relación entre el precio final y la capacidad de personas en un alojamiento. Asi mismo podriamos decir que dicha relación es directa, es decir que entre mayor sea el precio, mayor cantidad de personas va a tener.

```{r, warning = FALSE}

realsum2 <- cut(PrecioFinal, c(seq(from = 90, to = 600, by = 100)), include.lowest=TRUE)

#distancia2 <- 
cruce <- crosstab(realsum2, CapacidadPersonas, prop.c = TRUE, plot=TRUE)
cruce
```

#### **Tipo de cuarto vs Fines de negocio**

A continuación se muestra una grafica de barras apliladas para mostrar la relación que tienen las variables de tipo de cuarto y alojamiento con fines de negocio

```{r, warning=FALSE}
datos <-data.frame(TipoDeCuarto, FinesDeNegocios)
tabla <- table(datos)
barplot(tabla, beside = FALSE, 
        main = "Gráfica de barras apliladas", 
        xlab = "Fines de negocios", ylab = "Frecuencia", 
        names.arg = c("Sin fines de negocios", "Con fines de negocios"),
        legend.text = rownames(tabla), 
        args.legend = list(title = "Tipo de cuarto"))
```

En esta grafica podemos observar que asombrosamente los alojamientos con fines de negocios tienen una mayor proporción de cuartos compartidos a comparación de los alojamientos que no fueron para fines de negocios.

Tabla cruzada

```{r, warning=FALSE}
tabla <- crosstab(TipoDeCuarto,FinesDeNegocios,prop.c = TRUE,plot = FALSE)
tabla

```

#### **Cuarto privado vs Posee mas de un cuarto**

A continuación se muestra una grafica de barras apliladas para mostrar la relación que tienen las variables de cuarto privado y posee mas de un cuarto

```{r, warning=FALSE}
datos <-data.frame(CuartoPrivado, PoseeMasDeUnCuarto)
tabla <- table(datos)
barplot(tabla, beside = FALSE, 
        main = "Gráfica de barras apliladas", 
        xlab = "Posee mas de un cuarto", ylab = "Frecuencia", 
        names.arg = c("No posee mas de un cuarto", "posee mas de un cuarto"),
        legend.text = rownames(tabla), 
        args.legend = list(title = "Cuarto privado"))
```

Con esta grafica, a diferencia de los alojamientos que no poseen mas de un cuarto, poco menos de la mitad de los alojamientos que poseen mas de un cuarto poseen cuartos privados.

Tabla cruzada

```{r, warning=FALSE}
tabla <- crosstab(CuartoPrivado,PoseeMasDeUnCuarto,prop.c = TRUE,plot = FALSE)
tabla


```

###hipotesis de varias para varibles cualitativas

Como podemos ver, queremos conocer si el tipo de cuarto influye en si la habitacion es resevervada con motivos de negocios, por lo tanto planteamos las hipotesis.

H0: el tipo de cuarto no influye en si es reversado con motivos de negocios o no

H1: el tipo de cuarto influye en si es reversado con motivos de negocios o no #\`\`\`{r, warning=FALSE} #with(paris_weekdays, chisq.test(TipoDeCuarto, FinesDeNegocios , correct = #TRUE, p = rep(1/length(TipoDeCuarto),length(TipoDeCuarto))))

#\`\`\`

como podemos ver nuestro valor p es mucho menor que 5, por lo tanto podemos concluir que si existe una relacion en si el tipo de cuarto influye en la desicion de las personas que reservan con fines de negocios.

### **Anova - Análisis de la Varianza**



Dentro de esta seccion del informe vamos a realizar Anova con las diferentes variables que tenemos, sacando secciones a partir de otras variables para comprobar si existen diferencias entre sus medias. A si mismo, en caso de haber un rechazo se procedera a realizar un pos-anova.

$$$$


#### **Compracion del precio teniendo en cuenta su tipo de alojamiento**

Para AirBnb resulta importante poder comparar los diferentes precios que hay deacuerdo con el tipo de alojamiento. Teniendo en cuenta que el tipo de cuarto tiene 3 posibles valores que son : Apartamento/Casa entera, cuarto privado y cuarto compartido, se van a plantear si el precio en cada uno de estos grupos es igual:


$$H_0: \mu_{Completo} =  \mu_{Privado} = \mu_{Compartido}$$

$$H_1: \mu_{Completo} \neq  \mu_{Privado} \neq \mu_{Compartido}$$
*Ejecutamos el codigo de anova:*

```{r}
anova<-aov(lm(PrecioFinal~TipoDeCuarto))
summary(anova)
```
Con esto podemos ver que el valor p es mas pequeño que 0.05 por lo que podemos rechazar la hipotesis nula y decir que existen medias diferentes entre los grupos. Por lo que en este caso resulta pertinente realizar un Pos-anova para mirar cual es la relacion entre sus medias:

*Ejecutamos el codigo del Pos-anova*

```{r}
TukeyHSD(anova)
```

Teniendo en cuenta el criterio del anova podemos decir que el precio mas alto es el de apartamento o casa entera, seguida de cuarto privado seguido por cuarto compartido. Esto se veria de la siguiente manera:

$$\mu_{Completo} >  \mu_{Privado} > \mu_{Compartido}$$

$$$$

#### **Comparacion del puntaje de limpieza teniendo en cuenta su tipo de alojamiento**

Para AirBnb es sumamente importante mirar si hay algun tipo de diferencia en el puntaje de limpieza deacuerdo a las categorias del tipo de alojamiento. Teniendo en cuenta que el tipo de cuarto tiene 3 posibles valores que son : Apartamento/Casa entera, cuarto privado y cuarto compartido, se van a plantear si el precio en cada uno de estos grupos es igual: 

$$H_0: \mu_{Completo} =  \mu_{Privado} = \mu_{Compartido}$$

$$H_1: \mu_{Completo} \neq  \mu_{Privado} \neq \mu_{Compartido}$$
*Ejecutamos el codigo de anova:*

```{r}
anova<-aov(lm(CalificacionDeLimpieza~TipoDeCuarto))
summary(anova)
```
Con esto podemos ver que el valor p es mas pequeño que 0.05 por lo que podemos rechazar la hipotesis nula y decir que existen medias diferentes entre los grupos. Por lo que en este caso resulta pertinente realizar un Pos-anova para mirar cual es la relacion entre sus medias:

*Ejecutamos el codigo del Pos-anova*

```{r}
TukeyHSD(anova)
```

Teniendo en cuenta el criterio del pos-anova podemos decir que el tipo de alojamiento que: 

* El tipo de alojamiento que tiene un cuarto privado tiene en promedio un mayor puntaje que cuando el alojamiento es de una casa o apartamento completo.  

* No hay diferencia del puntaje de limpieza entre cuando tienen un cuarto compartido y cuando el alojamiento es de una casa o apartamento completo.

* El tipo de alojamiento que tiene un cuarto compartido tiene en promedio una calificacion de limpieza menor que cuando es un cuarto privado

$$$$

#### **Comparacion de la capacidad de personas con su tipo de alojamiento **

Para AirBnb es muy importante el poder comparar la diversa capacidad de personas deacuerdo con el tipo de alojamiento. Teniendo en cuenta que el tipo de cuarto tiene 3 posibles valores que son : Apartamento/Casa entera, cuarto privado y cuarto compartido, se van a plantear si su capacidad en cada uno de estos grupos es igual:


$$H_0: \mu_{Completo} =  \mu_{Privado} = \mu_{Compartido}$$

$$H_1: \mu_{Completo} \neq  \mu_{Privado} \neq \mu_{Compartido}$$

*Ejecutamos el codigo de anova:*

```{r}
anova<-aov(lm(CapacidadPersonas~TipoDeCuarto))
summary(anova)
```
Con esto podemos ver que el valor p es mucho mas pequeño que 0.05 por lo que podemos rechazar la hipotesis nula y decir que existen medias diferentes entre los grupos. Por ende se puede realizar un Pos-anova para mirar cual es la relacion entre sus medias:

*Ejecutamos el codigo del Pos-anova*

```{r}
TukeyHSD(anova)
```



### **Ji-Cuadrado**

Esta sección del informe se va a aplicar los tests de chi cuadrado, en la que se evaluará si existe una relación significativa entre dos variables categóricas. Estos tests se van a aplicar tanto a las variables cuantitativas como a las cualitativas de nuestro estudio:

#### **Fines de negocio vs Posee mas de un cuarto**

$$Ho: No~existe~relacion~entre~si~es~por~fin~de~negocio~y~posee~mas~de~un~cuarto.$$

$$H1: Existe~relacion~entre~si~es~para~fin~de~negocio~y~si~posee~mas~de~un~cuarto.$$

```{r, warning = FALSE}
with(datos,chisq.test(FinesDeNegocios, PoseeMasDeUnCuarto, correct = TRUE))
```
El valor p es muy pequeño por loq ue se concluye que si hay una relacion#### **Fines de negocio vs Posee mas de un cuarto**

$$Ho: No~existe~relacion~entre~si~es~por~fin~de~negocio~y~posee~mas~de~un~cuarto.$$

$$H1: Existe~relacion~entre~si~es~para~fin~de~negocio~y~si~posee~mas~de~un~cuarto.$$

```{r, warning = FALSE}
with(datos,chisq.test(FinesDeNegocios, PoseeMasDeUnCuarto, correct = TRUE))
```
El valor p es muy pequeño por loq ue se concluye que si hay una relacion

#### **Tipo de cuarto vs Fines de negocio**

$$Ho: No~existe~relacion~entre~el~tipo~de~cuarto~y~si~es~para~fines~de~negocios.$$
$$H1: Existe~relacion~entre~el~tipo~de~cuarto~y~si~es~para~fines~de~negocios.$$

```{r, warning = FALSE}
with(datos,chisq.test(TipoDeCuarto, FinesDeNegocios,correct = TRUE))
```

como podemos ver, el valor p es bastante pequeño por lo que nos permite concluir que si existe una relacion entre estos.

#### **Cuarto privado vs Posee mas de un cuarto**

$$Ho: No~existe~relacion~entre~si~el~cuarto~es~privado~y~si~es~para~fines~de~negocios.$$

$$H1: Existe~relacion~entre~si~es~para~cuarto~privado~y~si~es~para~fines~de~negocios.$$

```{r, warning = FALSE}
with(datos,chisq.test(CuartoPrivado,PoseeMasDeUnCuarto,correct = TRUE))

```

Aqui podemos ver el valor p el cual vuelve hacer muy pequeño (menor a 0.05), entonces podemos concluir que si existe un relacion entre cuarto privado y si es para fines de negocios. 


### **Conclusiones:**

A continuación se listarán las conclusiones que se hicieron a partir de la investigación hecha:

-   En París, en promedio entre 73% y y 76% de los alojamientos se presta todo el local y no un solo cuarto, a esto se le puede añadir que en promedio entre el 21% y el 23% de los alojamientos poseen mas de un cuarto, se puede decir que la hay una gran parte de publicaciones que son apartaestudios.

-   Los alojamientos de Airbnb publicados en París poseen un puntaje de limpieza promedio entre 9.21 y 9.30 puntos, lo cual asegura la calidad del servicio que se presta.

-   No hay una relación notable entre las variables dist y realsum, esto quiere decir que el valor del alojamiento no depende realmente de la distancia que hay hasta el centro de París.

-   El precio promedio de los alojamientos se encuentra en un rango entre 384.90 y 412.69 euros.

-   El promedio de capacidad de personas se encuentra entre 2.90 y 2.99 personas, por lo que si se toma en cuenta el punto anterior, en promedio el costo por persona de un alojamiento es de 135.18 Euros.

-   Con un nivel de confianza del 95% se puede decir que la distancia en promedio de los alojamientos hasta el centro de la ciudad es mayor a 2.1 kilómetros.

-   Existe una relación entre realsum y cleanliness_rating, la cual nos dice que entre más costo tenga el alojamiento, mejor va a ser el nivel de limpieza del mismo.

-   Hay una relación directa entre realsum y person_capacity, que entre mayor sea el precio, mayor va a ser la capacidad de personas que va a tener el alojamiento.
